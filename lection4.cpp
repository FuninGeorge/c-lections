//================================================================================================================//
/*
NB:ffmpeg 6.1, –Ω–µ –Ω–æ–≤–µ–µ
realloc - –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –ø–æ–¥ –ø–∞–∫–µ—Ç—ã
–º–æ–∂–µ—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏(—É–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ 2)

*/
#include <cstddef>
#include <cstring>
#include <iostream>
#include <string.h>

int main()
{
	struct A
	{
		int x;
		int *p;
		size_t len;
		A() : x(0){};
		A(int z) : x(z){};
		operator int() { return x; }	// –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à —Ç–∏–ø –≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π
		// explicit A(int z): x(z) {} - –≤—ã–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é —Ç–∏–ø–∞
		// explicit operator int() {return x;} - –≤—ã–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é —Ç–∏–ø–∞
		void init(int *px, size_t n)
		{
			p = new int[n];
			len = n;
			memcpy(p, px, sizeof(int) * n);	   // <- –±—ã—Å—Ç—Ä–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –±–µ–∑ —Ü–∏–∫–ª–∞
		}
		~A() { delete[] p; }
		A &operator=(const A &a)
		{
			delete[] p;
			p = new int[a.len];
			len = a.len;
			memcpy(p, a.p, len * sizeof(int));	  // <- –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ =
			return *this;
		}

		A(const A &a)
		{
			p = new int[a.len];
			len = a.len;
			memcpy(p, a.p, sizeof(int) * len);	  // <-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
		}
		// A &operator=(const A &a) = delete; <- –º–æ–∂–µ–º —É–±—Ä–∞—Ç—å –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —á—Ç–æ–±—ã –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
		// –Ω–∞—à–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞
	};

	A a;
	a = 5;
	int b = a;	  // –ø—Ä–∏–º–µ—Ä –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

	//================================================================================================================//
	/*
	–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –±—ã–≤–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ,–Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏
	void f(A c){}
	–∑–¥–µ—Å—å –º—ã —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –ê, –∫–æ—Ç–æ—Ä—ã–π –º—ã –ø–µ—Ä–µ–¥–∞–µ–º.
	—Ç–∞–º –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
	*/

	// üòéüòéüòéüòé
	//================================================================================================================//
	/*                                     –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

	–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –∏ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –ø—Ä–∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è

					   A
					  / \
					 B   C
					  \ /
					   D
	–ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –≤ D –±—É–¥–µ—Ç –¥–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ A

	–∑–Ω–∞—è –≤–∏—á—É —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å—é, –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç –ê –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º, —Ç–æ–≥–¥–∞ –≤ D –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –êü•µü•∂
	*/
	class C
	{
	  protected:
		int x;

	  public:
		C() : x(0) {}
		C(int a) : x(a) {}
		virtual int get()
		{
			return x;
		}	 // –≤–∏—Ä—Ç—É–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –æ–±—ä–µ–∫—Ç—É
			 // virtual ~C(){};
	};
	struct B : /* private || protected || public*/ A, C	   //<- –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä
	{
		int y;
		B() : y(0) {}
		B(int a, int b) : C(a), y(b) {}
		int get() { return -1; }	//<- –∑–¥–µ—Å—å –º—ã –ø–µ—Ä–µ–ø–∏—Å–∞–ª–∏ –º–µ—Ç–æ–¥ get –¥–ª—è –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞
	};
	// –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º(—Å–º. —Å—Ç—Ä–æ–∫—É 78)
	B *p = new B;
	C *pc = p;
	pc->get();	  //<- –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ get –∏–∑ –∫–ª–∞—Å—Å–∞ –°
	// –º–µ—Ç–æ–¥—ã –º–æ–∂–Ω–æ –æ–±—ä—è–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏
	pc->get();	  //<- —Ç–µ–ø–µ—Ä—å get –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –∏–∑ –∫–ª–∞—Å—Å–∞ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞

	delete pc;	  //<-–≤—ã–∑—ã–≤–∞–µ—Ç –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–Ω–∞—á–∞–ª–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π, –ø–æ—Ç–æ–º –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–∞–º—è—Ç—å

	//================================================================================================================//
	/*
											–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
	–¥–µ–ª–∞–µ–º –º–µ—Ç–æ–¥—ã –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏, –Ω–µ —Ä–µ–∞–ª–∏–∑—É—è –∏—Ö
	—Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã —Å–æ–∑–¥–∞–µ–º –∞–Ω–∞–ª–æ–≥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
	*/
	class Abstract
	{
		virtual int get() = 0;
	};

	return 0;
}
